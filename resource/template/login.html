<!DOCTYPE html>
<html lang="zh">
<head>
    {{include "/part/meta.html" .}} <title>登录 - {{.Config.server.name}} </title>
</head>
<body>
{{include "/part/top.html" .}}
<div id="wrapper">
    <div class="w">
        <div id="wrapper-left">
            <div class="box no-bottom-border">
                <div class="cell">
                    <a href="#" class=" hover-underline mr-3">{{.Config.server.name}}</a> <span class="mr-3">›</span> 管理员登录
                    <li class="fa fa-lock"></li>
                </div>
                <form class="cell" id="login-form">
                    <table class="table-add" cellpadding="10" cellspacing="10" width="100%" border="0">
                        <tr>
                            <td width="120" align="right" class="white-space-nowrap">用户名</td>
                            <td><input type="text" name="uname" autocomplete="off"></td>
                        </tr>
                        <tr>
                            <td width="120" align="right" class="white-space-nowrap">密码</td>
                            <td><input type="password" name="pwd"></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><img id="code" onclick="getCaptcha()" style="width: 187px;border-radius: 8px; height: 60px; "></td>
                        </tr>
                        <tr>
                            <td align="right" class="white-space-nowrap">你是机器人吗？</td>
                            <td><input type="text" id="captcha" name="code" placeholder="请输入验证码,点击可以更换图片" autocomplete="off"></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <button class="btn-info" id="login-btn" type="button" onclick="handleLogin()">登录</button>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>
        <div id="wrapper-right">
            <div class="box">
                <div class="cell">
                    <span class="color-desc fs-12">
                        <i class="fa fa-music" aria-hidden="true"></i>
                        一起听音乐
                    </span>
                </div>
                <div class="cell no-bottom-border">
                    <iframe id="music" style="opacity: 0.5;border-radius: 3px" width="260" height="234" title="YouTube video player" frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>
</div>
{{include "/part/footer.html" .}}
<script src="/resource/js/js.cookie.min.js"></script>
<script src="/resource/js/jquery-3.6.0.min.js"></script>
<script src="/resource/js/base.js"></script>
<script src="/resource/js/login.js"></script>
<script>
    const handleLogin = () => {
        $.post("/admin/admin/login", $("#login-form").serialize() + `&id=${id}`, async function (data) {
            if (data.code === 0) {
                alert('Success')
                location.href = '{{.Config.home}}'
            } else {
                alert(data.msg)
                await getCaptcha()
            }
        });
    }
</script>
</body>
</html>